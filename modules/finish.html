<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Олимпиада в Айтигенио 2020</title>
  <link rel="stylesheet" href="styles/style.css">
  <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon">
  <script src="google-blockly/blockly_compressed.js"></script>
  <script src="google-blockly/blocks_compressed.js"></script>
  <script src="google-blockly/javascript_compressed.js"></script>
  <script src="itgenio-blocks/blocks.js"></script>
  <script src="itgenio-blocks/js-generators.js"></script>
  <script src="google-blockly/msg/js/ru.js"></script>
  <script src="scripts/modal.js"></script>
</head>
<body>
	<div class="page-content lastPagepage-content">
		<div class="top-panel lastPagetop-panel">
			<div class="line-block">
		  		<span class="lastPageTitle"><img src="../images/student.png" alt="">&nbsp;Никита Пищуленок</span>
		  	</div>
		</div>
		

	  <div class="container">
	    
    	<div id="lastPageLeftPannel">
    		<span class="title">Результаты</span>
    		<div class="results">
    			<div class="line">
    				<div class="left">Количество набранных баллов</div><div class="right">32</div>
    			</div>
    			<div class="line">
    				<div class="left">Использовано блоков</div><div class="right">123</div>
    			</div>
    			<div class="line">
    				<div class="left">Потрачено времени на выполнение</div><div class="right">60:54</div>
    			</div>

    			<div class="line">
    				<div class="left ad">Победите квеста будут известны 30.08</div>
    			</div>
    		</div>
		</div>

		<div id="lastPageRightPannel">
			<div class="row">
				<span class="title">Призы</span>
        <!-- Кнопка ниже скрывается в css. Удалять ее нельзя -->
        <button id='btnDisplay' class='hidden'>Display</button> 
				<button id='btnSave' class="saveInPDF">Скачать в pdf</button>
			</div>
			
			<div class="wrapper">
				
					<div class="box">
            <img id="image1" src="../images/sertificate.png" style="display:none;"/>
            <canvas id='myCanvas' width="790" height="490">
					</div>
				</canvas>
				<img src="" alt="" id='imgConverted' class='hidden'>
				
			</div>
		</div>	    
	  </div>
	</div>
	

  <script>
  	const btnSave=document.querySelector('#btnDisplay');
  	const btnDwd=document.querySelector('#btnSave');
  	const canvas = document.getElementById('myCanvas');
    var img=document.getElementById("image1");
  	const imgConverted = document.getElementById('imgConverted');
    const ctx = canvas.getContext('2d');
    // ctx.scale(0.5,0.5);
    ctx.drawImage(img,0,20);

    ctx.font='56px Caveat';
    ctx.fillStyle='#534875';
    ctx.textAlign="center"; 
    ctx.fillText("Никита Пищуленок", 395, 290);  



  
  	btnSave.addEventListener('click', function(){

  		const dataURI=canvas.toDataURL("image/png");
  		imgConverted.src=dataURI;
  	});

  	btnDwd.addEventListener('click', function(){
      btnSave.click();
  		if(window.navigator.msSaveBlob){
  			window.navigator.msSaveBlob(canvas.msToBlob(), 'canvas-image.png');
  		}
  		else{
  			const a=document.createElement("a");
  			document.body.appendChild(a);
  			a.href=canvas.toDataURL();
  			a.download="canvas-image.png";
  			a.click();
  			document.body.removeChild(a);
  		}
  		
  	});
  </script>
</body>
</html>